# üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Husky (–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º)

## –ü—Ä–æ–±–ª–µ–º–∞: Git –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ Husky

–°–µ–π—á–∞—Å –≤ –ø—Ä–æ–µ–∫—Ç–µ:
```bash
.husky/
  ‚îú‚îÄ‚îÄ pre-commit     # ‚úÖ —Ñ–∞–π–ª –µ—Å—Ç—å
  ‚îú‚îÄ‚îÄ commit-msg     # ‚úÖ —Ñ–∞–π–ª –µ—Å—Ç—å
  ‚îî‚îÄ‚îÄ pre-push       # ‚úÖ —Ñ–∞–π–ª –µ—Å—Ç—å

.git/hooks/
  ‚îú‚îÄ‚îÄ pre-commit.sample    # ‚ùå —Ç–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä—ã
  ‚îú‚îÄ‚îÄ commit-msg.sample    # ‚ùå –Ω–µ –∞–∫—Ç–∏–≤–Ω—ã
  ‚îî‚îÄ‚îÄ ...
```

**Git –∑–∞–ø—É—Å–∫–∞–µ—Ç hooks —Ç–æ–ª—å–∫–æ –∏–∑ `.git/hooks/`, –∞ –ù–ï –∏–∑ `.husky/`!**

## –†–µ—à–µ–Ω–∏–µ: Husky —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–æ—Å—Ç

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤

```bash
npm install -D husky lint-staged @commitlint/cli @commitlint/config-conventional prettier
```

### –®–∞–≥ 2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Husky

```bash
npm run prepare  # –∑–∞–ø—É—Å–∫–∞–µ—Ç "husky install"
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç `husky install`:**

1. **–°–æ–∑–¥–∞–µ—Ç `.husky/_/husky.sh`** (—Å–ª—É–∂–µ–±–Ω—ã–π —Å–∫—Ä–∏–ø—Ç)
2. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Git**: `git config core.hooksPath .husky`
3. **–¢–µ–ø–µ—Ä—å Git –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `.husky/` –≤–º–µ—Å—Ç–æ `.git/hooks/`!**

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:
```bash
.husky/
  ‚îú‚îÄ‚îÄ _/
  ‚îÇ   ‚îî‚îÄ‚îÄ husky.sh        # üÜï —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  ‚îú‚îÄ‚îÄ pre-commit          # ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç!
  ‚îú‚îÄ‚îÄ commit-msg          # ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç!
  ‚îî‚îÄ‚îÄ pre-push            # ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

### –®–∞–≥ 3: –°–¥–µ–ª–∞—Ç—å hooks –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏ (macOS/Linux)

```bash
chmod +x .husky/pre-commit
chmod +x .husky/commit-msg
chmod +x .husky/pre-push
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ Husky —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É Git
git config core.hooksPath
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: .husky

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ husky.sh —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la .husky/_/husky.sh
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª

# –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–∏—Ç
git add .
git commit -m "test: checking hooks"
# –î–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è lint, prettier, type-check
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–π hook

### 1. Pre-commit hook

–ö–æ–≥–¥–∞ —Ç—ã –¥–µ–ª–∞–µ—à—å `git commit`:

```
git commit
   ‚Üì
Git –≤–∏–¥–∏—Ç: core.hooksPath = .husky
   ‚Üì
Git –∑–∞–ø—É—Å–∫–∞–µ—Ç: .husky/pre-commit
   ‚Üì
Husky –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
   ‚îú‚îÄ‚îÄ npx lint-staged  (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)
   ‚îî‚îÄ‚îÄ npm run type-check  (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç TypeScript)
   ‚Üì
–ï—Å–ª–∏ –æ—à–∏–±–∫–∏ ‚Üí –ë–õ–û–ö–ò–†–£–ï–¢ –∫–æ–º–º–∏—Ç ‚ùå
–ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Üí –†–ê–ó–†–ï–®–ê–ï–¢ –∫–æ–º–º–∏—Ç ‚úÖ
```

### 2. Commit-msg hook

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ç—ã –≤–≤–µ–ª commit message:

```
git commit -m "fixed bug"
   ‚Üì
Git –∑–∞–ø—É—Å–∫–∞–µ—Ç: .husky/commit-msg
   ‚Üì
Commitlint –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç:
   ‚îú‚îÄ‚îÄ "fixed bug" ‚ùå –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
   ‚îî‚îÄ‚îÄ "fix: correct navbar bug" ‚úÖ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   ‚Üì
–ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç –Ω–µ–≤–µ—Ä–µ–Ω ‚Üí –ë–õ–û–ö–ò–†–£–ï–¢ –∫–æ–º–º–∏—Ç ‚ùå
–ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç –≤–µ—Ä–µ–Ω ‚Üí –†–ê–ó–†–ï–®–ê–ï–¢ –∫–æ–º–º–∏—Ç ‚úÖ
```

### 3. Pre-push hook

–ö–æ–≥–¥–∞ —Ç—ã –¥–µ–ª–∞–µ—à—å `git push`:

```
git push
   ‚Üì
Git –∑–∞–ø—É—Å–∫–∞–µ—Ç: .husky/pre-push
   ‚Üì
Husky –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
   ‚îú‚îÄ‚îÄ npm run test:ci  (–≤—Å–µ —Ç–µ—Å—Ç—ã)
   ‚îî‚îÄ‚îÄ npm run build  (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏)
   ‚Üì
–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã —É–ø–∞–ª–∏ ‚Üí –ë–õ–û–ö–ò–†–£–ï–¢ push ‚ùå
–ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Üí –†–ê–ó–†–ï–®–ê–ï–¢ push ‚úÖ
```

## –î–µ—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç—ã lint-staged

–§–∞–π–ª `.lintstagedrc.json`:

```json
{
  "*.{ts,js}": [
    "eslint --fix",      // –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥
    "prettier --write"   // –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å
  ],
  "*.{html,scss}": [
    "prettier --write"   // —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  ]
}
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```bash
git add src/app/component.ts
git commit -m "feat: add component"
   ‚Üì
Lint-staged –≤–∏–¥–∏—Ç: component.ts –∏–∑–º–µ–Ω–µ–Ω
   ‚Üì
–ó–∞–ø—É—Å–∫–∞–µ—Ç:
   1. eslint --fix src/app/component.ts
   2. prettier --write src/app/component.ts
   ‚Üì
–ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ staging
   ‚Üì
–ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–æ–¥–æ–º ‚úÖ
```

## –ü–æ—á–µ–º—É —ç—Ç–æ senior-level?

### ‚ùå –ë–µ–∑ Husky:
- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–±—ã–≤–∞—é—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å lint
- –†–∞–∑–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–¥–∞ —É –∫–æ–º–∞–Ω–¥—ã
- Broken code –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- CI/CD –ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ push

### ‚úÖ –° Husky:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –≤–æ –≤—Å–µ–π –∫–æ–º–∞–Ω–¥–µ
- –û—à–∏–±–∫–∏ –ª–æ–≤—è—Ç—Å—è –î–û –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- CI/CD –≤—Å–µ–≥–¥–∞ –∑–µ–ª–µ–Ω—ã–π
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π workflow

## Bypass hooks (—Ç–æ–ª—å–∫–æ –¥–ª—è emergencies!)

```bash
# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å pre-commit –∏ commit-msg
git commit --no-verify -m "emergency fix"

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å pre-push
git push --no-verify
```

‚ö†Ô∏è **–ò—Å–ø–æ–ª—å–∑—É–π –û–ß–ï–ù–¨ —Ä–µ–¥–∫–æ!** –≠—Ç–æ –æ–±—Ö–æ–¥–∏—Ç –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞.

## Troubleshooting

### Hooks –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É
git config core.hooksPath

# –ï—Å–ª–∏ –ø—É—Å—Ç–æ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
npm run prepare

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞
ls -l .husky/pre-commit
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: -rwxr-xr-x (–∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π)

# –ï—Å–ª–∏ –Ω–µ—Ç
chmod +x .husky/*
```

### Husky not found

```bash
# –£–±–µ–¥–∏—Å—å —á—Ç–æ –ø–∞–∫–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
npm list husky

# –ï—Å–ª–∏ –Ω–µ—Ç
npm install -D husky
npm run prepare
```

### Windows –ø—Ä–æ–±–ª–µ–º—ã

–ù–∞ Windows –∏—Å–ø–æ–ª—å–∑—É–π:
- **Git Bash** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –∏–ª–∏ WSL2
- –∏–ª–∏ PowerShell —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## –ò—Ç–æ–≥–æ: –ú–∞–≥–∏—è –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º ‚ú®

```
1. npm install husky        ‚Üí –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–∞–∫–µ—Ç
2. npm run prepare          ‚Üí husky install
3. husky install            ‚Üí git config core.hooksPath .husky
4. git commit               ‚Üí Git —Å–º–æ—Ç—Ä–∏—Ç –≤ .husky/ –≤–º–µ—Å—Ç–æ .git/hooks/
5. .husky/pre-commit        ‚Üí –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
6. lint-staged + type-check ‚Üí –ü—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ–¥
7. –ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è         ‚Üí –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—Å—ë –æ–∫ ‚úÖ
```

–¢–µ–ø–µ—Ä—å Git **–∑–Ω–∞–µ—Ç** –ø—Ä–æ Husky –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–≤–æ–∏ hooks! üé£